# OUTBREAK Resourcepack normalmaps and heightmaps renderer
Данная программа создана для упрошения разработки ресурспака для Minecraft и позволяет в пару кликов рендерить карту нормалей и высот из .blend файла, созданного по шаблону.

**Работает только на Windows.**
# Обзор возможностей программы


## Установка

 - Для использования нужны установленные Python версии 3.7+ и Blender версии 2.80+

 - Путь к папке `Blender` необходимо добавить в переменную окружения `PATH`.

 - Далее установить данную программу через pip, после чего в консоли
будет доступна команда `orp`.
        
        python -m pip install git+https://github.com/Outbreak-Team/outbreak-rp-renderer.git


## Настройка

В первую очередь нужно добавить в меню создания нового файла Blender 
заготовленный шаблон. О том, как его использовать, речь пойдёт в конце.

    orp --install-template

После выполнения команды, в  Blender появится следующая возможность:

![](https://i.imgur.com/XSE9Xhx.png)

Теперь нужно добавить в контекстное меню Windows строки для запуска
команд рендеринга в желаемом разрешении.

    orp --context 256 512

![](https://i.imgur.com/Vj0fdtN.png)

После этого в контекстном меню для .blend файлов появятся строки с
командами рендеринга.

![](https://i.imgur.com/7ioZTGK.png)

Если выполнить команду без указания разрешений, добавленные ранее программой
строки будут удалены из контекстного меню.

    orp --context

Также на всякий случай существует возможность удаления папки с шаблоном из Blender.

    orp --remove-template

## Использование


После вызова команды из контекстного меню (или её консольного эквивалента),
будет запущен Blender в консоли, который отрендерит карты нормалей и
высот и схоранит их в ту же папку, в которой находится .blend файл, добавив
в выходные названия `_n` и `_h` соответственно.

![](https://i.imgur.com/t63Omsh.png)

Вызов из контекстного меню аналогичен выполнению команды

    orp --render <путь к .blend> --res <разрешение>


# Шаблон для Blender

Создавать карты нормалей и высот для ресурсупака нужно через шаблон
Для Blender.

В нём есть ряд настроек для старта, которые нужны для работы `orp`.

Вот вещи, которые нужно о нём знать:

- Материал `Heightmap_and_Normalmap` должен быть у объектов, принадлежащих
являющихся частями объекта, карты нормалей/высот которого надо запечь. Материал **нельзя переименовывать**.

- Все объекты, которые надо запечь должны находиться в коллекции `objects_for_baking`
её также **нельзя переименовывать**.

- Объект `bakescreen` - это плоскость, на которую будет запекаться карта нормалей.
его можно двигать/масштабировать, но **нельзя изменять его материал**.

- Рендеринг карты высот нужно настроить. Для этого необходимо переключиться на Material Output в группе `Height tune` и, увеличивая значение в ноде `Heightmap`,
найти самое большое значение, при котором объект остаётся полностью чёрным.
Таким образом, после настройки, на карте высот верхняя точка объекта будет максимально белой,
а нижняя - максимально чёрной.

- Нормали должны быть подключены к шейдеру, подключенному к Material Output в группе
`Normalmap` -> `Bake`.

- Ноды Material Output имеют особые имена, которые **нельзя изменять, так что нельзя
и удалять их**.

![](https://i.imgur.com/rbqVTtT.png)

Выбор рендера и разрешения не имеет смысла, так как скрипт `orp` автоматически
выбирает нужные настройки.